<!doctype html>
<html lang="zh">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="FaasJS Custom SSG" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      try {
        const useChoice = localStorage.getItem('vuepress-color-scheme');
        const systemStatus =
          'matchMedia' in window
            ? window.matchMedia('(prefers-color-scheme: dark)').matches
            : false;

        if (useChoice === 'light') {
          document.documentElement.dataset.theme = 'light';
        } else if (useChoice === 'dark' || systemStatus) {
          document.documentElement.dataset.theme = 'dark';
        }
      } catch {}
    </script>
    <link rel="icon" href="/logo.jpg" />
    <title>@faasjs/http | FaasJS</title>
    <meta name="description" content="一个基于 Typescript 的原子化应用框架" />
    <link rel="stylesheet" href="/assets/style.css" />
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0049636498302507" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143006612-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'UA-143006612-1');
    </script>
  </head>
  <body>
    <div id="app">
      <div class="vp-theme-container external-link-icon">
        <header class="vp-navbar" vp-navbar>
          <div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0">
            <div class="icon" aria-hidden="true"><span></span><span></span><span></span></div>
          </div>
          <span>
            <a class="route-link" href="/zh/"><span class="vp-site-name" aria-hidden="true">FaasJS</span></a>
          </span>
          <div class="vp-navbar-items-wrapper"><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><div class="vp-navbar-item"><a class="auto-link route-link route-link-active" href="/zh/" aria-label="首页">首页</a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="学习"><span class="title">学习</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="学习"><span class="title">学习</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown"><li class="vp-navbar-dropdown-item"><a class="auto-link route-link" href="/zh/guide/" aria-label="教程">教程</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link route-link route-link-active" href="/zh/doc/" aria-label="文档">文档</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link route-link" href="/CHANGELOG.html" aria-label="更新日志">更新日志</a></li></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="生态"><span class="title">生态</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="生态"><span class="title">生态</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown"><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://marketplace.visualstudio.com/items?itemName=FaasJS.faasjs-snippets" aria-label="VS Code 插件" rel="noopener noreferrer" target="_blank">VS Code 插件</a></li><li class="vp-navbar-dropdown-item"><h4 class="vp-navbar-dropdown-subtitle"><span>Docker 镜像</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://github.com/faasjs/faasjs/tree/main/images/nginx" aria-label="faasjs/nginx" rel="noopener noreferrer" target="_blank">faasjs/nginx</a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://github.com/faasjs/faasjs/tree/main/images/node" aria-label="faasjs/node" rel="noopener noreferrer" target="_blank">faasjs/node</a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://github.com/faasjs/faasjs/tree/main/images/vscode" aria-label="faasjs/vscode" rel="noopener noreferrer" target="_blank">faasjs/vscode</a></li></ul></li></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="社区"><span class="title">社区</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="社区"><span class="title">社区</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown"><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://github.com/faasjs/faasjs/" aria-label="Github" rel="noopener noreferrer" target="_blank">Github</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link route-link" href="/CONTRIBUTING.html" aria-label="支持 FaasJS">支持 FaasJS</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://github.com/sponsors/faasjs" aria-label="赞助 FaasJS" rel="noopener noreferrer" target="_blank">赞助 FaasJS</a></li></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="简体中文"><span class="title">简体中文</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="简体中文"><span class="title">简体中文</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown"><li class="vp-navbar-dropdown-item"><a class="auto-link route-link" href="/" aria-label="English">English</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link route-link route-link-active" href="/zh/doc/http.html" aria-label="简体中文">简体中文</a></li></ul></div></div></nav></div>
        </header>
        <div class="vp-sidebar-mask"></div>
        <aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><div class="vp-navbar-item"><a class="auto-link route-link route-link-active" href="/zh/" aria-label="首页">首页</a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper mobile"><button class="vp-navbar-dropdown-title" type="button" aria-label="学习"><span class="title">学习</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="学习"><span class="title">学习</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown"><li class="vp-navbar-dropdown-item"><a class="auto-link route-link" href="/zh/guide/" aria-label="教程">教程</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link route-link route-link-active" href="/zh/doc/" aria-label="文档">文档</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link route-link" href="/CHANGELOG.html" aria-label="更新日志">更新日志</a></li></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper mobile"><button class="vp-navbar-dropdown-title" type="button" aria-label="生态"><span class="title">生态</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="生态"><span class="title">生态</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown"><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://marketplace.visualstudio.com/items?itemName=FaasJS.faasjs-snippets" aria-label="VS Code 插件" rel="noopener noreferrer" target="_blank">VS Code 插件</a></li><li class="vp-navbar-dropdown-item"><h4 class="vp-navbar-dropdown-subtitle"><span>Docker 镜像</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://github.com/faasjs/faasjs/tree/main/images/nginx" aria-label="faasjs/nginx" rel="noopener noreferrer" target="_blank">faasjs/nginx</a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://github.com/faasjs/faasjs/tree/main/images/node" aria-label="faasjs/node" rel="noopener noreferrer" target="_blank">faasjs/node</a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://github.com/faasjs/faasjs/tree/main/images/vscode" aria-label="faasjs/vscode" rel="noopener noreferrer" target="_blank">faasjs/vscode</a></li></ul></li></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper mobile"><button class="vp-navbar-dropdown-title" type="button" aria-label="社区"><span class="title">社区</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="社区"><span class="title">社区</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown"><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://github.com/faasjs/faasjs/" aria-label="Github" rel="noopener noreferrer" target="_blank">Github</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link route-link" href="/CONTRIBUTING.html" aria-label="支持 FaasJS">支持 FaasJS</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://github.com/sponsors/faasjs" aria-label="赞助 FaasJS" rel="noopener noreferrer" target="_blank">赞助 FaasJS</a></li></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper mobile"><button class="vp-navbar-dropdown-title" type="button" aria-label="简体中文"><span class="title">简体中文</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="简体中文"><span class="title">简体中文</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown"><li class="vp-navbar-dropdown-item"><a class="auto-link route-link" href="/" aria-label="English">English</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link route-link route-link-active" href="/zh/doc/http.html" aria-label="简体中文">简体中文</a></li></ul></div></div></nav><ul class="vp-sidebar-items"><li><a class="vp-sidebar-item vp-sidebar-heading" href="/zh/doc/" aria-label="总览">总览</a></li><li><p class="vp-sidebar-heading">核心插件</p><ul class="vp-sidebar-items"><li><a class="vp-sidebar-item" href="/zh/doc/func.html" aria-label="@faasjs/func">@faasjs/func</a></li></ul></li><li><p class="vp-sidebar-heading">命令行插件</p><ul class="vp-sidebar-items"><li><a class="vp-sidebar-item" href="/zh/doc/create-faas-app.html" aria-label="create-faas-app">create-faas-app</a></li></ul></li><li><p class="vp-sidebar-heading">工具插件</p><ul class="vp-sidebar-items"><li><a class="vp-sidebar-item" href="/zh/doc/deep_merge.html" aria-label="@faasjs/deep_merge">@faasjs/deep_merge</a></li><li><a class="vp-sidebar-item" href="/zh/doc/dev.html" aria-label="@faasjs/dev">@faasjs/dev</a></li><li><a class="vp-sidebar-item" href="/zh/doc/load.html" aria-label="@faasjs/load">@faasjs/load</a></li><li><a class="vp-sidebar-item" href="/zh/doc/logger.html" aria-label="@faasjs/logger">@faasjs/logger</a></li><li><a class="vp-sidebar-item" href="/zh/doc/request.html" aria-label="@faasjs/request">@faasjs/request</a></li><li><a class="vp-sidebar-item" href="/zh/doc/server.html" aria-label="@faasjs/server">@faasjs/server</a></li></ul></li><li><p class="vp-sidebar-heading">网络插件</p><ul class="vp-sidebar-items"><li><a class="vp-sidebar-item active" href="/zh/doc/http.html" aria-label="@faasjs/http">@faasjs/http</a></li></ul></li><li><p class="vp-sidebar-heading">数据库插件</p><ul class="vp-sidebar-items"><li><a class="vp-sidebar-item" href="/zh/doc/knex.html" aria-label="@faasjs/knex">@faasjs/knex</a></li></ul></li><li><p class="vp-sidebar-heading">前端插件</p><ul class="vp-sidebar-items"><li><a class="vp-sidebar-item" href="/zh/doc/browser.html" aria-label="@faasjs/browser">@faasjs/browser</a></li><li><a class="vp-sidebar-item" href="/zh/doc/react.html" aria-label="@faasjs/react">@faasjs/react</a></li></ul></li></ul></aside>
        <main class="vp-page">
          <div vp-content>
            <div id="content"><div class="theme-default-content"><h1 id="%40faasjs%2Fhttp" tabindex="-1">@faasjs/http</h1>
<p>FaasJS 内置插件，无需额外安装。</p>
<p>Http 插件可以使云函数能够接收和处理网络请求。</p>
<p>同时还提供 cookie 和基于 cookie 的 seesion 功能。</p>
<p>此外，强烈建议按 <a href="/zh/guide/excel/request-spec.html">FaasJS 请求规范</a> 进行网络通讯。</p>
<h2 id="%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0" tabindex="-1">配置参数</h2>
<ul>
<li><strong>method</strong> <code>string</code> 英文大写的方法名，默认为 <code>POST</code></li>
<li><strong>timeout</strong> <code>number</code> 超时时间，单位为秒，默认为 <code>30</code></li>
<li><strong>cookie</strong> <code>object</code> cookie 配置项
<ul>
<li><strong>domain</strong> <code>string</code> 域名</li>
<li><strong>path</strong> <code>string</code> 路径，默认为 <code>/</code></li>
<li><strong>expires</strong> <code>number</code> 过期时间，默认为 <code>31536000</code>（365天）</li>
<li><strong>secure</strong> <code>boolean</code> 是否为 secure，默认为 <code>true</code></li>
<li><strong>httpOnly</strong> <code>boolean</code> 是否为 httpOnly，默认为 <code>true</code></li>
<li><strong>sameSite</strong> <code>string</code> 支持 <code>Strict</code>、<code>Lax</code> 和 <code>None</code></li>
<li><strong>session</strong> <code>object</code> session 配置项，必须配置 <code>key</code> 和 <code>secret</code> 才能启用session 功能
<ul>
<li><strong>key</strong> <code>string</code> cookie 中保存 session 信息的 key</li>
<li><strong>secret</strong> <code>string</code> 加密 session 信息的密钥</li>
<li><strong>salt</strong> <code>string</code> 加密用的 salt，默认为 <code>salt</code></li>
<li><strong>signedSalt</strong> <code>string</code> 加密用的 signedSalt，默认为 <code>signedSalt</code></li>
<li><strong>keylen</strong> <code>number</code> 加密用的 keylen，默认为 <code>64</code></li>
<li><strong>iterations</strong> <code>number</code> 加密用的 iterations，默认为 <code>100</code></li>
<li><strong>digest</strong> <code>string</code> 加密用的 digest，默认为 <code>sha256</code></li>
<li><strong>cipherName</strong> <code>string</code> 加密用的 cipherName，默认为 <code>aes-256-cbc</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="%E4%BA%91%E5%87%BD%E6%95%B0-handler-%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E5%A4%84%E7%90%86" tabindex="-1">云函数 handler 返回值的处理</h2>
<p>为了符合 <a href="/zh/guide/excel/request-spec.html">FaasJS 请求规范</a>，Http 插件会对 handler 的返回值进行特殊处理。规则为：</p>
<h3 id="%E8%87%AA%E5%8A%A8%E6%B7%BB%E5%8A%A0-headers-%E5%92%8C-statuscode" tabindex="-1">自动添加 headers 和 statusCode</h3>
<p>自动在 <code>headers</code> 中添加 <code>Content-Type</code> 和 <code>X-Request-Id</code>。</p>
<p>当 handler 直接 <code>return</code> 没有返回内容时，<code>statusCode</code> 自动设为 <code>204</code>（无内容）；有返回内容时，<code>statusCode</code> 自动设为 <code>200</code>。</p>
<p>当 handler 中抛异常时，<code>statusCode</code> 自动设为 <code>500</code>。</p>
<h3 id="%E6%AD%A3%E5%B8%B8%E8%BF%94%E5%9B%9E%E7%9A%84%E5%80%BC%E4%BC%9A%E8%A2%AB%E8%87%AA%E5%8A%A8%E5%8C%85%E8%A3%B9%E5%9C%A8-data-%E5%AD%97%E6%AE%B5%E4%B8%AD" tabindex="-1">正常返回的值会被自动包裹在 data 字段中</h3>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Func</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@faasjs/func&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Http</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@faasjs/http&#x27;</span>;

<span class="hljs-keyword">const</span> http = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Http</span>();

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> func = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Func</span>({
  <span class="hljs-attr">plugins</span>: [http],
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
}); <span class="hljs-comment">// 将返回 {&quot;data&quot;:true}</span>
</code></pre>
<h3 id="%E6%8A%9B%E5%BC%82%E5%B8%B8%E6%97%B6%E4%BC%9A%E8%87%AA%E5%8A%A8%E8%BF%94%E5%9B%9E-error-%E5%AD%97%E6%AE%B5" tabindex="-1">抛异常时会自动返回 error 字段</h3>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Func</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@faasjs/func&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Http</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@faasjs/http&#x27;</span>;

<span class="hljs-keyword">const</span> http = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Http</span>();

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> func = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Func</span>({
  <span class="hljs-attr">plugins</span>: [http],
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;wrong&#x27;</span>);
  }
}); <span class="hljs-comment">// 将返回 {&quot;error&quot;:{&quot;message&quot;:&quot;wrong&quot;}}</span>
</code></pre>
<h2 id="%E5%AE%9E%E4%BE%8B%E5%B1%9E%E6%80%A7" tabindex="-1">实例属性</h2>
<h3 id="headers" tabindex="-1">headers</h3>
<p>请求头</p>
<h3 id="params" tabindex="-1">params</h3>
<p>请求参数，默认取 body 中的内容，且当 headers 中声明类型为 json 时，会自动解析为 object。</p>
<h3 id="cookie" tabindex="-1">cookie</h3>
<p>cookie 实例</p>
<h3 id="session" tabindex="-1">session</h3>
<p>session 实例</p>
<h2 id="%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95" tabindex="-1">实例方法</h2>
<h3 id="setheader-(key%3A-string%2C-value%3A-any)%3A-http" tabindex="-1">setHeader (key: string, value: any): Http</h3>
<p>设置响应的请求头，可以覆盖默认的请求头</p>
<h3 id="setcontenttype-(type%3A-string%2C-charset%3A-string-%3D-'utf-8')%3A-http" tabindex="-1">setContentType (type: string, charset: string = 'utf-8'): Http</h3>
<p>设置响应类型，支持常见类型的简写，如 <code>plain</code>、<code>html</code>、<code>css</code>、<code>javascript</code> 等。</p>
<h3 id="setstatuscode-(code%3A-number)%3A-http" tabindex="-1">setStatusCode (code: number): Http</h3>
<p>设置响应状态码，可以覆盖默认的状态码</p>
<h3 id="setbody-(body%3A-string)%3A-http" tabindex="-1">setBody (body: string): Http</h3>
<p>设置 Body，可以覆盖默认的 Body 且不会被包裹在 data 字段中也不会被 JSON 序列化</p>
<h2 id="cookie-%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95" tabindex="-1">Cookie 实例方法</h2>
<h3 id="read(key%3A-string)%3A-string%3F" tabindex="-1">read(key: string): string?</h3>
<p>读取 cookie 信息</p>
<h3 id="write(key%3A-string%2C-value%3A-any%2C-opts%3F%3A-%7Bdomain%3F%3A-string%3B-path%3F%3A-string%3B-expires%3F%3A-number-%7C-string%3B-secure%3F%3A-boolean%3B-httponly%3F%3A-boolean%3B%7D)%3A-cookie" tabindex="-1">write(key: string, value: any, opts?: {domain?: string; path?: string; expires?: number | string; secure?: boolean; httpOnly?: boolean;}): Cookie</h3>
<p>写入 cookie 信息</p>
<h2 id="session-%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95" tabindex="-1">Session 实例方法</h2>
<h3 id="read(key%3A-string)%3A-any" tabindex="-1">read(key: string): any</h3>
<p>读取 session 信息</p>
<h3 id="write(key%3A-string%2C-value%3F%3A-any)%3A-session" tabindex="-1">write(key: string, value?: any): Session</h3>
<p>写入 session 信息</p>
<h3 id="encode(text%3A-any)%3A-string" tabindex="-1">encode(text: any): string</h3>
<p>加密信息</p>
<h3 id="decode(text%3A-string)%3A-object" tabindex="-1">decode(text: string): object</h3>
<p>解密信息</p>
<h2 id="%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81" tabindex="-1">示例代码</h2>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Func</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@faasjs/func&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Http</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@faasjs/http&#x27;</span>;

<span class="hljs-keyword">const</span> http = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Http</span>({
  <span class="hljs-attr">config</span>: {
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;GET&#x27;</span> <span class="hljs-comment">// 设置请求方法为 GET，默认为 POST</span>
  }
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> func = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Func</span>({
  <span class="hljs-attr">plugins</span>: [http], <span class="hljs-comment">// 将实例放到云函数的插件中</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params"></span>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(http.<span class="hljs-property">params</span>); <span class="hljs-comment">// 打印请求入参</span>
    <span class="hljs-keyword">return</span> http.<span class="hljs-property">cookie</span>!.<span class="hljs-title function_">read</span>(<span class="hljs-string">&#x27;key&#x27;</span>); <span class="hljs-comment">// 读取 cookie 中的值</span>
  }
});
</code></pre>
<h2 id="%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98" tabindex="-1">常见问题</h2>
<h3 id="path-%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E7%9A%84%E8%A7%84%E5%88%99%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F" tabindex="-1">Path 自动生成的规则是什么？</h3>
<p>Path 会按照文件夹和文件名自动生成，并会去掉 Path 的第一级文件夹的名字和最后的 <code>/index</code>。</p>
<p>如：</p>
<p><code>funcs/product/show.func.ts</code> =&gt; <code>/product/show</code></p>
<p><code>funcs/product/index.func.ts</code> =&gt; <code>/product</code></p>
<h3 id="%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E5%85%81%E8%AE%B8%E9%85%8D%E7%BD%AE-path%EF%BC%9F" tabindex="-1">为什么不允许配置 path？</h3>
<p>不允许配置 Path 是为了保证所有云函数文件的目录位置与网关的 Path 完全对应，便于后期维护迭代。</p>
<h3 id="%E5%A4%9A%E4%B8%AA%E7%BD%91%E5%85%B3%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE%EF%BC%9F" tabindex="-1">多个网关如何配置？</h3>
<p>在 faas.yaml 中，可以配置不同的网关，在云函数中初始化插件时，将配置名传入即可。</p>
<p>若一个云函数需要接收多个网关的请求，可以创建多个插件实例，部署时会逐一部署。</p>
<h2 id="github-%E5%9C%B0%E5%9D%80" tabindex="-1">Github 地址</h2>
<p><a href="https://github.com/faasjs/faasjs/tree/main/packages/http" target="_blank" rel="noopener noreferrer" class="external-link">https://github.com/faasjs/faasjs/tree/main/packages/http</a></p>
</div></div>
          </div>
          
        </main>
      </div>
    </div>
    <script src="/assets/app.js" defer></script>
  </body>
</html>