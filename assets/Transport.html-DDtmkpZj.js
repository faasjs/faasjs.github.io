import{_ as l,c as p,b as n,d as t,e as o,f as a,a as r,r as i,o as d}from"./app-BXca_5Dz.js";const c={};function u(h,s){const e=i("RouteLink");return d(),p("div",null,[n("p",null,[t(e,{to:"/doc/logger/"},{default:o(()=>s[0]||(s[0]=[a("Documents")])),_:1}),s[2]||(s[2]=a(" / ")),t(e,{to:"/doc/logger/"},{default:o(()=>s[1]||(s[1]=[a("@faasjs/logger")])),_:1}),s[3]||(s[3]=a(" / Transport"))]),s[27]||(s[27]=n("h1",{id:"class-transport",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#class-transport"},[n("span",null,"Class: Transport")])],-1)),s[28]||(s[28]=n("p",null,"The transport class that manages the transport handlers and log messages.",-1)),n("p",null,[n("strong",null,[s[5]||(s[5]=a("Note: This class is not meant to be used directly. Use the ")),t(e,{to:"/doc/logger/functions/getTransport.html"},{default:o(()=>s[4]||(s[4]=[a("getTransport")])),_:1}),s[6]||(s[6]=a(" instead."))])]),s[29]||(s[29]=r(`<h2 id="example" tabindex="-1"><a class="header-anchor" href="#example"><span>Example</span></a></h2><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> getTransport <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@faasjs/logger&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> transport <span class="token operator">=</span> <span class="token function">getTransport</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">transport<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&#39;test&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>messages<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line"> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">{</span> level<span class="token punctuation">,</span> message <span class="token punctuation">}</span> <span class="token keyword">of</span> messages<span class="token punctuation">)</span></span>
<span class="line">   <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>level<span class="token punctuation">,</span> message<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">transport<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&#39;test&#39;</span><span class="token punctuation">,</span> debug<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// If you using Logger, it will automatically insert messages to the transport.</span></span>
<span class="line"><span class="token comment">// Otherwise, you can insert messages manually.</span></span>
<span class="line">transport<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  level<span class="token operator">:</span> <span class="token string">&#39;info&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  labels<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;server&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  message<span class="token operator">:</span> <span class="token string">&#39;test message&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  timestamp<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;SIGINT&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">await</span> transport<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="constructors" tabindex="-1"><a class="header-anchor" href="#constructors"><span>Constructors</span></a></h2><h3 id="new-transport" tabindex="-1"><a class="header-anchor" href="#new-transport"><span>new Transport()</span></a></h3>`,4)),n("blockquote",null,[n("p",null,[s[8]||(s[8]=n("strong",null,"new Transport",-1)),s[9]||(s[9]=a("(): ")),t(e,{to:"/doc/logger/classes/Transport.html"},{default:o(()=>s[7]||(s[7]=[n("code",null,"Transport",-1)])),_:1})])]),s[30]||(s[30]=n("h4",{id:"returns",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#returns"},[n("span",null,"Returns")])],-1)),n("p",null,[t(e,{to:"/doc/logger/classes/Transport.html"},{default:o(()=>s[10]||(s[10]=[n("code",null,"Transport",-1)])),_:1})]),s[31]||(s[31]=r('<h2 id="methods" tabindex="-1"><a class="header-anchor" href="#methods"><span>Methods</span></a></h2><h3 id="config" tabindex="-1"><a class="header-anchor" href="#config"><span>config()</span></a></h3><blockquote><p><strong>config</strong>(<code>options</code>): <code>void</code></p></blockquote><p>Configure the transport options for the logger.</p><h4 id="parameters" tabindex="-1"><a class="header-anchor" href="#parameters"><span>Parameters</span></a></h4><h5 id="options" tabindex="-1"><a class="header-anchor" href="#options"><span>options</span></a></h5>',6)),n("p",null,[t(e,{to:"/doc/logger/type-aliases/TransportOptions.html"},{default:o(()=>s[11]||(s[11]=[n("code",null,"TransportOptions",-1)])),_:1})]),s[32]||(s[32]=r('<p>The configuration options for the transport.</p><h4 id="returns-1" tabindex="-1"><a class="header-anchor" href="#returns-1"><span>Returns</span></a></h4><p><code>void</code></p><h3 id="flush" tabindex="-1"><a class="header-anchor" href="#flush"><span>flush()</span></a></h3><blockquote><p><strong>flush</strong>(): <code>Promise</code>&lt;<code>void</code>&gt;</p></blockquote><p>Flushes the current messages by processing them with the registered handlers.</p><p>If the transport is already flushing, it will wait until the current flush is complete. If the transport is disabled or there are no messages to flush, it will return immediately. If there are no handlers registered, it will log a warning, clear the messages, disable the transport, and stop the interval.</p><p>The method processes all messages with each handler and logs any errors encountered during the process.</p><h4 id="returns-2" tabindex="-1"><a class="header-anchor" href="#returns-2"><span>Returns</span></a></h4><p><code>Promise</code>&lt;<code>void</code>&gt;</p><p>A promise that resolves when the flush operation is complete.</p><h3 id="insert" tabindex="-1"><a class="header-anchor" href="#insert"><span>insert()</span></a></h3><blockquote><p><strong>insert</strong>(<code>message</code>): <code>void</code></p></blockquote><p>Inserts a log message into the transport if it is enabled.</p><h4 id="parameters-1" tabindex="-1"><a class="header-anchor" href="#parameters-1"><span>Parameters</span></a></h4><h5 id="message" tabindex="-1"><a class="header-anchor" href="#message"><span>message</span></a></h5>',16)),n("p",null,[t(e,{to:"/doc/logger/type-aliases/LoggerMessage.html"},{default:o(()=>s[12]||(s[12]=[n("code",null,"LoggerMessage",-1)])),_:1})]),s[33]||(s[33]=r('<p>The log message to be inserted.</p><h4 id="returns-3" tabindex="-1"><a class="header-anchor" href="#returns-3"><span>Returns</span></a></h4><p><code>void</code></p><h3 id="register" tabindex="-1"><a class="header-anchor" href="#register"><span>register()</span></a></h3><blockquote><p><strong>register</strong>(<code>name</code>, <code>handler</code>): <code>void</code></p></blockquote><p>Registers a new transport handler.</p><h4 id="parameters-2" tabindex="-1"><a class="header-anchor" href="#parameters-2"><span>Parameters</span></a></h4><h5 id="name" tabindex="-1"><a class="header-anchor" href="#name"><span>name</span></a></h5><p><code>string</code></p><p>The name of the transport handler.</p><h5 id="handler" tabindex="-1"><a class="header-anchor" href="#handler"><span>handler</span></a></h5>',11)),n("p",null,[t(e,{to:"/doc/logger/type-aliases/TransportHandler.html"},{default:o(()=>s[13]||(s[13]=[n("code",null,"TransportHandler",-1)])),_:1})]),s[34]||(s[34]=r('<p>The transport handler function to be registered.</p><h4 id="returns-4" tabindex="-1"><a class="header-anchor" href="#returns-4"><span>Returns</span></a></h4><p><code>void</code></p><h3 id="reset" tabindex="-1"><a class="header-anchor" href="#reset"><span>reset()</span></a></h3><blockquote><p><strong>reset</strong>(): <code>void</code></p></blockquote><p>Resets the transport by clearing handlers, emptying messages, and re-enabling the transport. If an interval is set, it will be cleared.</p><h4 id="returns-5" tabindex="-1"><a class="header-anchor" href="#returns-5"><span>Returns</span></a></h4><p><code>void</code></p><h3 id="stop" tabindex="-1"><a class="header-anchor" href="#stop"><span>stop()</span></a></h3><blockquote><p><strong>stop</strong>(): <code>Promise</code>&lt;<code>void</code>&gt;</p></blockquote><p>Stops the logger transport.</p><p>This method performs the following actions:</p><ol><li>Logs a &#39;stopping&#39; message.</li><li>Clears the interval if it is set.</li><li>Flushes any remaining logs.</li><li>Disables the transport.</li></ol><h4 id="returns-6" tabindex="-1"><a class="header-anchor" href="#returns-6"><span>Returns</span></a></h4><p><code>Promise</code>&lt;<code>void</code>&gt;</p><p>A promise that resolves when the transport has been stopped.</p><h3 id="unregister" tabindex="-1"><a class="header-anchor" href="#unregister"><span>unregister()</span></a></h3><blockquote><p><strong>unregister</strong>(<code>name</code>): <code>void</code></p></blockquote><p>Unregister a handler by its name.</p><p>This method logs the unregistration process, removes the handler from the internal collection, and disables the logger if no handlers remain.</p><h4 id="parameters-3" tabindex="-1"><a class="header-anchor" href="#parameters-3"><span>Parameters</span></a></h4><h5 id="name-1" tabindex="-1"><a class="header-anchor" href="#name-1"><span>name</span></a></h5><p><code>string</code></p><p>The name of the handler to unregister.</p><h4 id="returns-7" tabindex="-1"><a class="header-anchor" href="#returns-7"><span>Returns</span></a></h4><p><code>void</code></p><h2 id="properties" tabindex="-1"><a class="header-anchor" href="#properties"><span>Properties</span></a></h2><h3 id="handlers" tabindex="-1"><a class="header-anchor" href="#handlers"><span>handlers</span></a></h3>',28)),n("blockquote",null,[n("p",null,[s[15]||(s[15]=n("strong",null,"handlers",-1)),s[16]||(s[16]=a(": ")),s[17]||(s[17]=n("code",null,"Map",-1)),s[18]||(s[18]=a("<")),s[19]||(s[19]=n("code",null,"string",-1)),s[20]||(s[20]=a(", ")),t(e,{to:"/doc/logger/type-aliases/TransportHandler.html"},{default:o(()=>s[14]||(s[14]=[n("code",null,"TransportHandler",-1)])),_:1}),s[21]||(s[21]=a(">"))])]),s[35]||(s[35]=n("h3",{id:"messages",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#messages"},[n("span",null,"messages")])],-1)),n("blockquote",null,[n("p",null,[s[23]||(s[23]=n("strong",null,"messages",-1)),s[24]||(s[24]=a(": ")),t(e,{to:"/doc/logger/type-aliases/LoggerMessage.html"},{default:o(()=>s[22]||(s[22]=[n("code",null,"LoggerMessage",-1)])),_:1}),s[25]||(s[25]=a("[] = ")),s[26]||(s[26]=n("code",null,"[]",-1))])])])}const m=l(c,[["render",u],["__file","Transport.html.vue"]]),k=JSON.parse('{"path":"/doc/logger/classes/Transport.html","title":"Class: Transport","lang":"en","frontmatter":{},"headers":[{"level":2,"title":"Example","slug":"example","link":"#example","children":[]},{"level":2,"title":"Constructors","slug":"constructors","link":"#constructors","children":[{"level":3,"title":"new Transport()","slug":"new-transport","link":"#new-transport","children":[]}]},{"level":2,"title":"Methods","slug":"methods","link":"#methods","children":[{"level":3,"title":"config()","slug":"config","link":"#config","children":[]},{"level":3,"title":"flush()","slug":"flush","link":"#flush","children":[]},{"level":3,"title":"insert()","slug":"insert","link":"#insert","children":[]},{"level":3,"title":"register()","slug":"register","link":"#register","children":[]},{"level":3,"title":"reset()","slug":"reset","link":"#reset","children":[]},{"level":3,"title":"stop()","slug":"stop","link":"#stop","children":[]},{"level":3,"title":"unregister()","slug":"unregister","link":"#unregister","children":[]}]},{"level":2,"title":"Properties","slug":"properties","link":"#properties","children":[{"level":3,"title":"handlers","slug":"handlers","link":"#handlers","children":[]},{"level":3,"title":"messages","slug":"messages","link":"#messages","children":[]}]}],"git":{},"filePathRelative":"doc/logger/classes/Transport.md"}');export{m as comp,k as data};
