import{_ as s,c as a,a as e,o as t}from"./app-Bep3kb_1.js";const p={};function c(o,n){return t(),a("div",null,[...n[0]||(n[0]=[e(`<h1 id="faasjs-dev" tabindex="-1"><a class="header-anchor" href="#faasjs-dev"><span>@faasjs/dev</span></a></h1><p>FaasJS 的开发工具插件，提供本地开发与测试能力。</p><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> <span class="token function">install</span> @faasjs/dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="核心能力" tabindex="-1"><a class="header-anchor" href="#核心能力"><span>核心能力</span></a></h2><ul><li><code>viteFaasJsServer</code>：在 Vite 开发环境中以内置方式运行 FaasJS API。</li><li><code>createPgliteKnex</code> / <code>mountFaasKnex</code>：为测试场景快速挂载 PGlite 数据库。</li><li><code>test</code> / <code>FuncWarper</code>：包装云函数并在测试中直接调用。</li><li><code>streamToString</code>：将 ReadableStream 响应转换为字符串便于断言。</li></ul><h2 id="测试示例" tabindex="-1"><a class="header-anchor" href="#测试示例"><span>测试示例</span></a></h2><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> test <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@faasjs/dev&#39;</span></span>
<span class="line"><span class="token keyword">import</span> Func <span class="token keyword">from</span> <span class="token string">&#39;../index.func&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;should work&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> func <span class="token operator">=</span> <span class="token function">test</span><span class="token punctuation">(</span>Func<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> func<span class="token punctuation">.</span><span class="token function">handler</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">expect</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;data&quot;:&quot;Hello, world&quot;}&#39;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="相关文档" tabindex="-1"><a class="header-anchor" href="#相关文档"><span>相关文档</span></a></h2><ul><li><a href="https://vitest.dev/" target="_blank" rel="noopener noreferrer">Vitest</a></li><li><a href="https://vitest.dev/guide/assertion.html" target="_blank" rel="noopener noreferrer">Vitest Expect</a></li></ul>`,10)])])}const i=s(p,[["render",c]]),r=JSON.parse('{"path":"/zh/doc/dev.html","title":"@faasjs/dev","lang":"zh","frontmatter":{},"git":{"updatedTime":1770880437000,"contributors":[{"name":"Ben","username":"Ben","email":"ben@zfben.com","commits":1,"url":"https://github.com/Ben"}],"changelog":[{"hash":"e21b9cc2b06fc6bdcece1d337aa6f23437e35edd","time":1770880437000,"email":"ben@zfben.com","author":"Ben","message":"chore(ci): switch docs build to node and simplify workflows"}]},"filePathRelative":"zh/doc/dev.md"}');export{i as comp,r as data};
