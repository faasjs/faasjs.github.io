<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="FaasJS Custom SSG" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      try {
        const useChoice = localStorage.getItem('vuepress-color-scheme');
        const systemStatus =
          'matchMedia' in window
            ? window.matchMedia('(prefers-color-scheme: dark)').matches
            : false;

        if (useChoice === 'light') {
          document.documentElement.dataset.theme = 'light';
        } else if (useChoice === 'dark' || systemStatus) {
          document.documentElement.dataset.theme = 'dark';
        }
      } catch {}
    </script>
    <link rel="icon" href="/logo.jpg" />
    <title>Class: Transport | FaasJS</title>
    <meta name="description" content="An atomic application framework built for the TypeScript developer." />
    <link rel="stylesheet" href="/assets/style.css" />
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0049636498302507" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143006612-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'UA-143006612-1');
    </script>
  </head>
  <body>
    <div id="app">
      <div class="vp-theme-container external-link-icon no-sidebar">
        <header class="vp-navbar" vp-navbar>
          <div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0">
            <div class="icon" aria-hidden="true"><span></span><span></span><span></span></div>
          </div>
          <span>
            <a class="route-link" href="/"><span class="vp-site-name" aria-hidden="true">FaasJS</span></a>
          </span>
          <div class="vp-navbar-items-wrapper"><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><div class="vp-navbar-item"><a class="auto-link route-link" href="/" aria-label="Home">Home</a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Learn"><span class="title">Learn</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Learn"><span class="title">Learn</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown"><li class="vp-navbar-dropdown-item"><a class="auto-link route-link" href="/guide/" aria-label="Guide">Guide</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link route-link route-link-active" href="/doc/" aria-label="Documents">Documents</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://github.com/faasjs/starter" aria-label="Starter Template" rel="noopener noreferrer" target="_blank">Starter Template</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link route-link" href="/CHANGELOG.html" aria-label="Changelog">Changelog</a></li><li class="vp-navbar-dropdown-item"><h4 class="vp-navbar-dropdown-subtitle"><span>Ecosystem</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://marketplace.visualstudio.com/items?itemName=FaasJS.faasjs-snippets" aria-label="VS Code Plugin" rel="noopener noreferrer" target="_blank">VS Code Plugin</a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link route-link" href="/doc/images/" aria-label="Docker Images">Docker Images</a></li></ul></li></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Community"><span class="title">Community</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Community"><span class="title">Community</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown"><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://github.com/faasjs/faasjs/" aria-label="Github" rel="noopener noreferrer" target="_blank">Github</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link route-link" href="/CONTRIBUTING.html" aria-label="Contributing">Contributing</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://github.com/sponsors/faasjs" aria-label="Sponsor" rel="noopener noreferrer" target="_blank">Sponsor</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link route-link" href="/SECURITY.html" aria-label="Security">Security</a></li></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="English"><span class="title">English</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="English"><span class="title">English</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown"><li class="vp-navbar-dropdown-item"><a class="auto-link route-link route-link-active" href="/doc/logger/classes/Transport.html" aria-label="English">English</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link route-link" href="/zh/" aria-label="简体中文">简体中文</a></li></ul></div></div></nav></div>
        </header>
        <div class="vp-sidebar-mask"></div>
        <aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><div class="vp-navbar-item"><a class="auto-link route-link" href="/" aria-label="Home">Home</a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper mobile"><button class="vp-navbar-dropdown-title" type="button" aria-label="Learn"><span class="title">Learn</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Learn"><span class="title">Learn</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown"><li class="vp-navbar-dropdown-item"><a class="auto-link route-link" href="/guide/" aria-label="Guide">Guide</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link route-link route-link-active" href="/doc/" aria-label="Documents">Documents</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://github.com/faasjs/starter" aria-label="Starter Template" rel="noopener noreferrer" target="_blank">Starter Template</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link route-link" href="/CHANGELOG.html" aria-label="Changelog">Changelog</a></li><li class="vp-navbar-dropdown-item"><h4 class="vp-navbar-dropdown-subtitle"><span>Ecosystem</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://marketplace.visualstudio.com/items?itemName=FaasJS.faasjs-snippets" aria-label="VS Code Plugin" rel="noopener noreferrer" target="_blank">VS Code Plugin</a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link route-link" href="/doc/images/" aria-label="Docker Images">Docker Images</a></li></ul></li></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper mobile"><button class="vp-navbar-dropdown-title" type="button" aria-label="Community"><span class="title">Community</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Community"><span class="title">Community</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown"><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://github.com/faasjs/faasjs/" aria-label="Github" rel="noopener noreferrer" target="_blank">Github</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link route-link" href="/CONTRIBUTING.html" aria-label="Contributing">Contributing</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://github.com/sponsors/faasjs" aria-label="Sponsor" rel="noopener noreferrer" target="_blank">Sponsor</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link route-link" href="/SECURITY.html" aria-label="Security">Security</a></li></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper mobile"><button class="vp-navbar-dropdown-title" type="button" aria-label="English"><span class="title">English</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="English"><span class="title">English</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown"><li class="vp-navbar-dropdown-item"><a class="auto-link route-link route-link-active" href="/doc/logger/classes/Transport.html" aria-label="English">English</a></li><li class="vp-navbar-dropdown-item"><a class="auto-link route-link" href="/zh/" aria-label="简体中文">简体中文</a></li></ul></div></div></nav></aside>
        <main class="vp-page">
          <div vp-content>
            <div id="content"><div class="theme-default-content"><p><a href="/doc/logger/">Documents</a> / <a href="/doc/logger/">@faasjs/logger</a> / Transport</p>
<h1 id="class%3A-transport" tabindex="-1">Class: Transport</h1>
<p>The transport class that manages the transport handlers and log messages.</p>
<p><strong>Note: This class is not meant to be used directly. Use the <a href="/doc/logger/functions/getTransport.html">getTransport</a> instead.</strong></p>
<h2 id="example" tabindex="-1">Example</h2>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { getTransport } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@faasjs/logger&#x27;</span>

<span class="hljs-keyword">const</span> transport = <span class="hljs-title function_">getTransport</span>()

transport.<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;test&#x27;</span>, <span class="hljs-title function_">async</span> (messages) =&gt; {
 <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> { level, message } <span class="hljs-keyword">of</span> messages)
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(level, message)
})

transport.<span class="hljs-title function_">config</span>({ <span class="hljs-attr">label</span>: <span class="hljs-string">&#x27;test&#x27;</span>, <span class="hljs-attr">debug</span>: <span class="hljs-literal">true</span> })

<span class="hljs-comment">// If you using Logger, it will automatically insert messages to the transport.</span>
<span class="hljs-comment">// Otherwise, you can insert messages manually.</span>
transport.<span class="hljs-title function_">insert</span>({
  <span class="hljs-attr">level</span>: <span class="hljs-string">&#x27;info&#x27;</span>,
  <span class="hljs-attr">labels</span>: [<span class="hljs-string">&#x27;server&#x27;</span>],
  <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;test message&#x27;</span>,
  <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
})

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;SIGINT&#x27;</span>, <span class="hljs-title function_">async</span> () =&gt; {
  <span class="hljs-keyword">await</span> transport.<span class="hljs-title function_">stop</span>()
  process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">0</span>)
})
</code></pre>
<h2 id="constructors" tabindex="-1">Constructors</h2>
<h3 id="constructor" tabindex="-1">Constructor</h3>
<blockquote>
<p><strong>new Transport</strong>(): <code>Transport</code></p>
</blockquote>
<h4 id="returns" tabindex="-1">Returns</h4>
<p><code>Transport</code></p>
<h2 id="methods" tabindex="-1">Methods</h2>
<h3 id="config()" tabindex="-1">config()</h3>
<blockquote>
<p><strong>config</strong>(<code>options</code>): <code>void</code></p>
</blockquote>
<p>Configure the transport options for the logger.</p>
<h4 id="parameters" tabindex="-1">Parameters</h4>
<h5 id="options" tabindex="-1">options</h5>
<p><a href="/doc/logger/type-aliases/TransportOptions.html"><code>TransportOptions</code></a></p>
<p>The configuration options for the transport.</p>
<h4 id="returns-1" tabindex="-1">Returns</h4>
<p><code>void</code></p>
<h3 id="flush()" tabindex="-1">flush()</h3>
<blockquote>
<p><strong>flush</strong>(): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Flushes the current messages by processing them with the registered handlers.</p>
<p>If the transport is already flushing, it will wait until the current flush is complete.
If the transport is disabled or there are no messages to flush, it will return immediately.
If there are no handlers registered, it will log a warning, clear the messages, disable the transport, and stop the interval.</p>
<p>The method processes all messages with each handler and logs any errors encountered during the process.</p>
<h4 id="returns-2" tabindex="-1">Returns</h4>
<p><code>Promise</code>&lt;<code>void</code>&gt;</p>
<p>A promise that resolves when the flush operation is complete.</p>
<h3 id="insert()" tabindex="-1">insert()</h3>
<blockquote>
<p><strong>insert</strong>(<code>message</code>): <code>void</code></p>
</blockquote>
<p>Inserts a log message into the transport if it is enabled.</p>
<h4 id="parameters-1" tabindex="-1">Parameters</h4>
<h5 id="message" tabindex="-1">message</h5>
<p><a href="/doc/logger/type-aliases/LoggerMessage.html"><code>LoggerMessage</code></a></p>
<p>The log message to be inserted.</p>
<h4 id="returns-3" tabindex="-1">Returns</h4>
<p><code>void</code></p>
<h3 id="register()" tabindex="-1">register()</h3>
<blockquote>
<p><strong>register</strong>(<code>name</code>, <code>handler</code>): <code>void</code></p>
</blockquote>
<p>Registers a new transport handler.</p>
<h4 id="parameters-2" tabindex="-1">Parameters</h4>
<h5 id="name" tabindex="-1">name</h5>
<p><code>string</code></p>
<p>The name of the transport handler.</p>
<h5 id="handler" tabindex="-1">handler</h5>
<p><a href="/doc/logger/type-aliases/TransportHandler.html"><code>TransportHandler</code></a></p>
<p>The transport handler function to be registered.</p>
<h4 id="returns-4" tabindex="-1">Returns</h4>
<p><code>void</code></p>
<h3 id="reset()" tabindex="-1">reset()</h3>
<blockquote>
<p><strong>reset</strong>(): <code>void</code></p>
</blockquote>
<p>Resets the transport by clearing handlers, emptying messages, and re-enabling the transport.
If an interval is set, it will be cleared.</p>
<h4 id="returns-5" tabindex="-1">Returns</h4>
<p><code>void</code></p>
<h3 id="stop()" tabindex="-1">stop()</h3>
<blockquote>
<p><strong>stop</strong>(): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Stops the logger transport.</p>
<p>This method performs the following actions:</p>
<ol>
<li>Logs a 'stopping' message.</li>
<li>Clears the interval if it is set.</li>
<li>Flushes any remaining logs.</li>
<li>Disables the transport.</li>
</ol>
<h4 id="returns-6" tabindex="-1">Returns</h4>
<p><code>Promise</code>&lt;<code>void</code>&gt;</p>
<p>A promise that resolves when the transport has been stopped.</p>
<h3 id="unregister()" tabindex="-1">unregister()</h3>
<blockquote>
<p><strong>unregister</strong>(<code>name</code>): <code>void</code></p>
</blockquote>
<p>Unregister a handler by its name.</p>
<p>This method logs the unregistration process, removes the handler from the internal collection,
and disables the logger if no handlers remain.</p>
<h4 id="parameters-3" tabindex="-1">Parameters</h4>
<h5 id="name-1" tabindex="-1">name</h5>
<p><code>string</code></p>
<p>The name of the handler to unregister.</p>
<h4 id="returns-7" tabindex="-1">Returns</h4>
<p><code>void</code></p>
<h2 id="properties" tabindex="-1">Properties</h2>
<h3 id="handlers" tabindex="-1">handlers</h3>
<blockquote>
<p><strong>handlers</strong>: <code>Map</code>&lt;<code>string</code>, <a href="/doc/logger/type-aliases/TransportHandler.html"><code>TransportHandler</code></a>&gt;</p>
</blockquote>
<h3 id="messages" tabindex="-1">messages</h3>
<blockquote>
<p><strong>messages</strong>: <a href="/doc/logger/type-aliases/LoggerMessage.html"><code>LoggerMessage</code></a>[] = <code>[]</code></p>
</blockquote>
</div></div>
          </div>
          
        </main>
      </div>
    </div>
    <script src="/assets/app.js" defer></script>
  </body>
</html>